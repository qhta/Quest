<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:QuestWPF"
        xmlns:Views="clr-namespace:QuestWPF.Views"
        xmlns:rsx="clr-namespace:QuestRSX;assembly=QuestRSX"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        xmlns:mvvm="clr-namespace:Qhta.MVVM;assembly=QuestENG"
        x:Class="QuestWPF.MainWindow"
        mc:Ignorable="d"
        Title="QuestAPP" Height="450" Width="800" WindowState="Maximized">
  <Window.DataContext>
    <local:MDIViewModel/>
  </Window.DataContext>
  <Window.InputBindings>
    <KeyBinding 
      Key="S" 
      Modifiers="Control" 
      Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileSaveCommand}" 
      CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileSaveData}" />
  </Window.InputBindings>
  <Grid Background="Silver">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Menu>
      <MenuItem Header="{x:Static rsx:MenuStrings.File}">
        <MenuItem 
          Header="{x:Static rsx:MenuStrings.Open}" 
          Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileOpenCommand}" />
        <MenuItem 
          Header="{x:Static rsx:MenuStrings.Save}"
          InputGestureText="Ctrl+S"
          Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileSaveCommand}" 
          CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileSaveData}" />
        <MenuItem 
          Header="{x:Static rsx:MenuStrings.SaveAs}"
          Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileSaveCommand}" 
          CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileSaveAsData}" />
        <Separator/>
        <MenuItem 
          Header="{x:Static rsx:MenuStrings.Import}" 
          Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.FileImportCommand}" />
      </MenuItem>
      <MenuItem Header="{x:Static rsx:MenuStrings.Edit}">
        <MenuItem 
          Header="{x:Static rsx:MenuStrings.Copy}" 
          Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.ViewCopyCommand}"
          CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:MainWindow}}, Path=Commander.ViewCopyData}" />
      </MenuItem>
      <MenuItem Header="{x:Static rsx:MenuStrings.Tools}"/>
      <MenuItem Header="{x:Static rsx:MenuStrings.Window}"/>
      <MenuItem Header="{x:Static rsx:MenuStrings.Help}"/>
    </Menu>
    <syncfusion:DockingManager 
      x:Name="dockingManager"
      Grid.Row="1"
      Height="Auto"
      syncfusion:DockingManager.AnimationDelay="00:00:00.200"
      EnableMouseHoverBackground="False"
      IsVS2010DraggingEnabled="True"
      PersistState="False"
      SwitchMode="{Binding SwitchMode, Mode=TwoWay}"
      ItemsSource="{Binding DockCollections }" 
      ContainerMode="MDI"
      UseNativeFloatWindow="True"
      UseDocumentContainer="False"
      ActiveWindowChanged="DockingManager_OnActiveWindowChanged"
      >

      <!--  Customized Header Template  -->
      <syncfusion:DockingManager.HeaderTemplate>
        <DataTemplate>
          <DockPanel LastChildFill="True">
            <TextBlock
                                Margin="5,0,0,0"
                                VerticalAlignment="Center"
                                Text="{Binding}"
                                TextTrimming="CharacterEllipsis" />
          </DockPanel>
        </DataTemplate>
      </syncfusion:DockingManager.HeaderTemplate>
      <Views:ProjectsView
        x:Name="ProjectsView"
        syncfusion:DockingManager.CanClose="True"
        syncfusion:DockingManager.DesiredHeightInDockedMode="600"
        syncfusion:DockingManager.DesiredWidthInDockedMode="200"
        syncfusion:DockingManager.DesiredWidthInFloatingMode="200"
        syncfusion:DockingManager.Header="Projects"
        syncfusion:DockingManager.SideInDockedMode="Right"
        syncfusion:DocumentContainer.MDIBounds="30,30,300,300"
        syncfusion:DocumentContainer.TabCaptionToolTip="check the result">
        <!--  Customized Header Template  -->
        <syncfusion:DockingManager.Icon>
          <ImageBrush ImageSource= "Assets/DockingManager/MDI/Sample.gif"/>
        </syncfusion:DockingManager.Icon>
      </Views:ProjectsView>
    </syncfusion:DockingManager>
  </Grid>
</Window>
